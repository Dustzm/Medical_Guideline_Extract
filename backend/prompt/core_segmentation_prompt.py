# 构造提示词（使用您提供的思维链提示词）
def build_prompt(text):
    """
    核心内容细粒度分割，分割为<临床问题>原子
    Args:
        text: 粗粒度处理后的核心内容

    Returns: 分割后的临床问题json

    """
    prompt = """
你是一位专业的医学指南文档分析专家。你的任务是将医学指南的核心内容部分（临床问题、推荐意见、治疗方案及证据）按照每个临床问题进行细粒度分割。你必须严格按照原文进行分割，不得出现幻觉或添加任何额外内容。

### 思维链步骤

#### 第一步：识别临床问题结构
1. 仔细阅读核心内容部分，识别所有临床问题的编号和标题模式
2. 常见的临床问题格式包括：
   - "3.1 临床问题1：xxxxxxxxxxxx"
   - "问题1：xxxxxxxxxxxx"
   - "临床问题一：xxxxxxxxxxxx"
   - 其他类似的编号和标题格式
   - 注意：某些临床问题可能没有编号，仅标题存在，例如："气虚血瘀证"

3. 记录所有临床问题的完整编号和标题，确保不遗漏任何一个

#### 第二步：确定每个临床问题的内容范围
1. 对于每个临床问题，确定其内容范围的开始和结束位置：
   - 开始位置：临床问题标题的起始处
   - 结束位置：下一个临床问题标题开始之前，或核心内容部分的结束

2. 特别注意以下内容元素，它们属于当前临床问题的范围：
   - 临床问题描述
   - 相关的推荐意见（可能包含子编号，如"推荐意见1-1"）
   - 每个推荐意见的治疗方案
   - 支持每个推荐意见的证据
   - 与该临床问题直接相关的表格或图表

#### 第三步：内容分割与验证
1. 按照确定的范围，将每个临床问题的内容完整分割出来
2. 验证分割的准确性：
   - 确保每个分割部分都以临床问题标题开始
   - 确保包含该临床问题的所有相关内容（推荐意见、治疗方案、证据等）
   - 确保不包含下一个临床问题的内容
   - 确保不遗漏任何相关内容

#### 第四步：格式化输出
按照以下格式输出分割结果：

```json
{
  "total":3,
  "atom":[
    "[临床问题1的完整内容，包括标题、推荐意见、治疗方案、证据等]",
    "[临床问题2的完整内容，包括标题、推荐意见、治疗方案、证据等]",
    "[临床问题3的完整内容，包括标题、推荐意见、治疗方案、证据等]"
  ]
}
```


（其中total为分割出来的临床问题总数，atom作为一个jsonArray依次存储每个临床问题的内容，直到所有临床问题都分割完毕）

### 重要原则

1. **严格遵循原文**：
   - 不得添加、删减或修改任何原文内容
   - 不得对内容进行总结、概括或解释
   - 保持原文的格式、标点和结构

2. **完整性保证**：
   - 确保每个临床问题的内容完整分割
   - 包含该临床问题的所有相关元素（推荐意见、治疗方案、证据等）
   - 不遗漏任何相关内容

3. **准确性保证**：
   - 确保分割边界准确，不混入其他临床问题的内容
   - 确保每个分割部分都正确对应其临床问题
   - 确保不出现幻觉内容

4. **格式一致性**：
   - 使用指定的输出格式
   - 确保每个临床问题标题格式一致
   - 保持原文内容的格式和结构
   - 最终输出仅输出json，禁止使用markdwon格式，禁止输出无关内容

### 执行检查清单

在完成分割后，请检查以下项目：

- [ ] 所有临床问题都已识别并分割
- [ ] 每个分割部分都以临床问题标题开始
- [ ] 每个临床问题的所有相关内容都已包含在对应分割部分中
- [ ] 没有将一个临床问题的内容误分到另一个临床问题中
- [ ] 没有添加任何原文中没有的内容
- [ ] 没有遗漏任何原文中的相关内容
- [ ] 输出格式符合要求

请按照以上思维链步骤，将输入的医学指南核心内容按照每个临床问题进行细粒度分割，并按照指定格式输出结果。

    """
    prompt = f"""
        {prompt}
        待分割的文本：
        {text[:100000]}
        """
    return prompt